import{r as l,j as e,C as m,H as c,O as y,R as b,a as j}from"./three-Ba7oFbth.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}})();const f=4,h=3,g=2;function v(a){const[n,r]=l.useState({score:0,playerX:0,playerY:0,playerZ:0,isPlaying:!0}),i=l.useCallback(()=>{r(o=>({...o,score:o.score+1,playerX:Math.random()*f-f/2,playerY:Math.random()*h-h/2,playerZ:Math.random()*g-g/2}))},[]),t=l.useCallback(()=>{r({score:0,playerX:0,playerY:0,playerZ:0,isPlaying:!0})},[]),s=l.useCallback(()=>{r(o=>({...o,isPlaying:!o.isPlaying}))},[]);return{gameState:n,incrementScore:i,resetGame:t,togglePause:s}}function P({position:a,onClick:n,isActive:r}){const i=l.useRef(null),[t,s]=l.useState(!1),o=l.useCallback(d=>{d.stopPropagation(),r&&n()},[r,n]);return e.jsxs("mesh",{ref:i,position:a,onClick:o,onPointerOver:()=>r&&s(!0),onPointerOut:()=>s(!1),scale:r?t?1.2:1:.6,"data-testid":"target-sphere",children:[e.jsx("sphereGeometry",{args:[.5,32,32]}),e.jsx("meshStandardMaterial",{color:r?t?"#00ff88":"#00cc66":"#666666",emissive:r?"#00ff88":"#333333",emissiveIntensity:t?.5:.2,metalness:.3,roughness:.4}),e.jsxs("mesh",{position:[0,0,0],children:[e.jsx("torusGeometry",{args:[.35,.02,16,32]}),e.jsx("meshStandardMaterial",{color:r?"#ffffff":"#999999",transparent:!0,opacity:.8})]}),e.jsxs("mesh",{position:[0,0,0],children:[e.jsx("torusGeometry",{args:[.2,.02,16,32]}),e.jsx("meshStandardMaterial",{color:r?"#ffffff":"#999999",transparent:!0,opacity:.8})]})]})}function S(){const{gameState:a,incrementScore:n,resetGame:r,togglePause:i}=v(),t=l.useCallback(()=>{a.isPlaying&&n()},[a.isPlaying,n]);return e.jsxs(e.Fragment,{children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("pointLight",{position:[10,10,10],intensity:1}),e.jsx("pointLight",{position:[-10,-10,-5],intensity:.5}),e.jsx(P,{position:[a.playerX,a.playerY,a.playerZ],onClick:t,isActive:a.isPlaying}),e.jsx("gridHelper",{args:[10,10,"#30363d","#21262d"],position:[0,-2,0]}),e.jsx(c,{position:[0,3,0],center:!0,distanceFactor:8,"data-testid":"score-display",children:e.jsxs("div",{style:{background:"rgba(33, 38, 45, 0.9)",padding:"20px 40px",borderRadius:"20px",textAlign:"center",minWidth:"200px",backdropFilter:"blur(10px)"},children:[e.jsx("div",{style:{color:"#7d8590",fontSize:"14px",fontWeight:"bold",marginBottom:"8px"},"data-testid":"score-label",children:"SCORE"}),e.jsx("div",{style:{color:"#00ff88",fontSize:"48px",fontWeight:"bold"},"data-testid":"score-value","data-score":a.score.toString(),children:a.score})]})}),e.jsx(c,{position:[-4,2.5,0],distanceFactor:10,"data-testid":"game-status-container",children:e.jsx("div",{style:{color:a.isPlaying?"#00ff88":"#ffa500",fontSize:"14px",fontWeight:"bold",background:"rgba(33, 38, 45, 0.9)",padding:"8px 16px",borderRadius:"12px",backdropFilter:"blur(10px)"},"data-testid":"game-status",children:a.isPlaying?"üéØ Active":"‚è∏Ô∏è Paused"})}),e.jsx(c,{position:[0,-3,0],center:!0,distanceFactor:10,"data-testid":"instructions",children:e.jsx("div",{style:{color:a.isPlaying?"#ffffff":"#7d8590",fontSize:"16px",background:"rgba(33, 38, 45, 0.9)",padding:"12px 20px",borderRadius:"12px",textAlign:"center",backdropFilter:"blur(10px)"},"data-testid":"instructions-text",children:a.isPlaying?"üéØ Click the target to score points!":"‚è∏Ô∏è Game paused - Resume to continue"})}),e.jsx(c,{position:[4,2.5,0],distanceFactor:10,"data-testid":"controls-container",children:e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:i,"data-testid":"pause-button",style:{background:a.isPlaying?"#ff6b35":"#00c851",color:"white",border:"none",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"14px"},children:a.isPlaying?"Pause":"Resume"}),e.jsx("button",{onClick:r,"data-testid":"reset-button",style:{background:"#7c3aed",color:"white",border:"none",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"14px"},children:"üîÑ Reset"})]})}),!a.isPlaying&&e.jsx(c,{position:[0,0,0],center:!0,distanceFactor:5,children:e.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.8)",padding:"40px 60px",borderRadius:"20px",textAlign:"center",backdropFilter:"blur(10px)"},"data-testid":"pause-overlay",children:[e.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:"‚è∏Ô∏è"}),e.jsx("div",{style:{color:"#ffffff",fontSize:"28px",fontWeight:"bold"},"data-testid":"pause-title",children:"GAME PAUSED"})]})}),e.jsx(y,{enablePan:!1,enableZoom:!0,minDistance:3,maxDistance:15,maxPolarAngle:Math.PI/2})]})}function E(){return e.jsxs("div",{className:"app-container","data-testid":"app-container",children:[e.jsx("h1",{"data-testid":"app-title",children:"Three.js React Game"}),e.jsx("div",{"data-testid":"threejs-canvas-container",style:{width:"100%",height:"600px"},children:e.jsx(m,{camera:{position:[0,2,8],fov:50},style:{background:"#0d1117"},"data-testid":"threejs-canvas",children:e.jsx(S,{})})}),e.jsx("p",{className:"instructions","data-testid":"app-instructions",children:"A minimal Three.js game built with @react-three/fiber and @react-three/drei"})]})}const C=l.createContext(null),u={didCatch:!1,error:null};class R extends l.Component{constructor(n){super(n),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=u}static getDerivedStateFromError(n){return{didCatch:!0,error:n}}resetErrorBoundary(){const{error:n}=this.state;if(n!==null){for(var r,i,t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];(r=(i=this.props).onReset)===null||r===void 0||r.call(i,{args:s,reason:"imperative-api"}),this.setState(u)}}componentDidCatch(n,r){var i,t;(i=(t=this.props).onError)===null||i===void 0||i.call(t,n,r)}componentDidUpdate(n,r){const{didCatch:i}=this.state,{resetKeys:t}=this.props;if(i&&r.error!==null&&k(n.resetKeys,t)){var s,o;(s=(o=this.props).onReset)===null||s===void 0||s.call(o,{next:t,prev:n.resetKeys,reason:"keys"}),this.setState(u)}}render(){const{children:n,fallbackRender:r,FallbackComponent:i,fallback:t}=this.props,{didCatch:s,error:o}=this.state;let d=n;if(s){const p={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")d=r(p);else if(i)d=l.createElement(i,p);else if(t!==void 0)d=t;else throw o}return l.createElement(C.Provider,{value:{didCatch:s,error:o,resetErrorBoundary:this.resetErrorBoundary}},d)}}function k(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return a.length!==n.length||a.some((r,i)=>!Object.is(r,n[i]))}function F({error:a}){return e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"Something went wrong:"}),e.jsx("pre",{children:a.message}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Try again"})]})}const x=document.getElementById("root");if(!x)throw new Error("Root element not found");b.createRoot(x).render(e.jsx(j.StrictMode,{children:e.jsx(R,{FallbackComponent:F,children:e.jsx(E,{})})}));
